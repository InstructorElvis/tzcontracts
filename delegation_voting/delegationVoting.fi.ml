parameter bytes;storage (pair (map address bool) (pair (map int (pair string int)) string));code{DUP;CDR;NIL operation;PAIR;SWAP;CAR;DUP;PUSH nat 4;PUSH nat 0;SLICE;IF_NONE{PUSH nat 100;FAILWITH}{};DUP;PUSH bytes 0x954c2939;COMPARE;EQ;IF{DROP;DUP;SIZE;PUSH nat 4;SWAP;SUB;DUP;GT;IF{}{PUSH nat 102;FAILWITH};ABS;PUSH nat 4;SLICE;IF_NONE{PUSH nat 101;FAILWITH}{};UNPACK address;IF_NONE{PUSH nat 103;FAILWITH}{};PAIR;SENDER;DIP{SELF;ADDRESS;};COMPARE;EQ;IF{DUP;CAR;DIP{PUSH bool False;SOME;};DIIP{DUP;CDDAR;};UPDATE;SWAP;SET_CDDAR;}{PUSH string "Not authorized to add a voter.";FAILWITH;};CDR;}{DUP;PUSH bytes 0x4b34e241;COMPARE;EQ;IF{DROP;DUP;SIZE;PUSH nat 4;SWAP;SUB;DUP;GT;IF{}{PUSH nat 102;FAILWITH};ABS;PUSH nat 4;SLICE;IF_NONE{PUSH nat 101;FAILWITH}{};UNPACK (pair int (pair string int));IF_NONE{PUSH nat 103;FAILWITH}{};PAIR;SENDER;DIP{SELF;ADDRESS;};COMPARE;EQ;IF{DUP;CAAR;DIP{DUP;CADR;SOME;};DIIP{DUP;CDDDAR;};UPDATE;SWAP;SET_CDDDAR;}{PUSH string "Not authorized to add a ballet.";FAILWITH;};CDR;}{DUP;PUSH bytes 0xc6f8b78e;COMPARE;EQ;IF{DROP;DUP;SIZE;PUSH nat 4;SWAP;SUB;DUP;GT;IF{}{PUSH nat 102;FAILWITH};ABS;PUSH nat 4;SLICE;IF_NONE{PUSH nat 101;FAILWITH}{};UNPACK string;IF_NONE{PUSH nat 103;FAILWITH}{};PAIR;SENDER;DIP{SELF;ADDRESS;};COMPARE;EQ;IF{DUP;CAR;SWAP;SET_CDDDDR;}{PUSH string "Not authorized to set description.";FAILWITH;};CDR;}{DUP;PUSH bytes 0x5f2e3556;COMPARE;EQ;IF{DROP;DUP;SIZE;PUSH nat 4;SWAP;SUB;DUP;GT;IF{}{PUSH nat 102;FAILWITH};ABS;PUSH nat 4;SLICE;IF_NONE{PUSH nat 101;FAILWITH}{};UNPACK int;IF_NONE{PUSH nat 103;FAILWITH}{};PAIR;NONE (pair string int);NONE bool;PAIR;PAIR;SENDER;DIP{DUP;CDDDAR;};MEM;DIP{PUSH bool False;};COMPARE;EQ;IF{PUSH string "You are not authorized to vote.";FAILWITH;}{};DUP;CDAR;DIP{DUP;CDDDDAR;};MEM;DIP{PUSH bool False;};COMPARE;EQ;IF{PUSH string "No proposal exists for your vote.";FAILWITH;}{};SENDER;DIP{DUP;CDDDAR;};GET;IF_NONE{PUSH string "Key not found in map";FAILWITH}{};SWAP;SET_CAAR;DUP;CDAR;DIP{DUP;CDDDDAR;};GET;IF_NONE{PUSH string "Key not found in map";FAILWITH}{};SWAP;SET_CADR;DUP;CAAR;DIP{PUSH bool False;};COMPARE;EQ;IF{PUSH bool True;SWAP;SET_CAAR;DUP;CADDR;DIP{PUSH int 1;};ADD;SWAP;SET_CADDR;DUP;CDAR;DIP{DUP;CADR;SOME;};DIIP{DUP;CDDDDAR;};UPDATE;SWAP;SET_CDDDDAR;SENDER;DIP{DUP;CAAR;SOME;};DIIP{DUP;CDDDAR;};UPDATE;SWAP;SET_CDDDAR;}{PUSH string "You have already voted. Voters may only vote once.";FAILWITH;};CDDR;}{DROP;PUSH nat 400;FAILWITH;}}}}};